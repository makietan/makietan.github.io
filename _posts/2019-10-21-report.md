---
layout: post
title:  "JavaScript でしゃべらせる"
categories: tech
date: "2019-10-21 00:00:00"
---

どうやら Chrome とかだとしゃべらせることができるらしい。

[embed:https://developer.mozilla.org/ja/docs/Web/API/SpeechSynthesisUtterance]


```js
function speak() {
  var speech = new SpeechSynthesisUtterance();
  speech.text = document.querySelector('.haiku').innerText.replace('\n', '、');
  speech.lang = 'ja-JP';
  speech.rate = 0.8;
  var voices = [...window.speechSynthesis.getVoices()].filter((e) => e.lang === 'ja-JP');
  if (voices.length > 0) {
    speech.voice = voices.pop();
  }
  speechSynthesis.speak(speech);
}
```

rate はしゃべる速度を調整できる。

ちょっと遅めがいいので `0.8` にしている。

音声はブラウザに入ってるものしか使えないので `ja-JP` のものだけを取得して一番ユニークそうなものを採用することにした。