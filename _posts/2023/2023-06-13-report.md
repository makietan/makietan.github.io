---
layout: post
title:  "ä¹…ã€…ã« Docker ã‚’è§¦ã‚‰ã›ã‚‰ã‚Œã‚‹â‘¡"
categories: tech
date: "2023-06-13 00:00:00"
---


<div class="card">
  <a href="https://makietan.github.io/tech/2023/06/12/report.html"></a>
  <div class="card__header">
    <a href="https://makietan.github.io/tech/2023/06/12/report.html">makietan.github.io</a>
  </div>
  <div class="card__image">
    <img src="https://makietan.github.io/assets/thumbnail/logo.png">
  </div>
  <div class="card__title">
    <p>ä¹…ã€…ã« Docker ã‚’è§¦ã‚‰ã›ã‚‰ã‚Œã‚‹ | è‚‰ã¨ãŠç±³ã¨ãƒ–ãƒ­ãƒƒã‚³ãƒªãƒ¼</p>
  </div>
  <div class="card__description">
    <p>æœ¬å½“ã«ãƒ€ãƒ«ã„ã€‚</p>
  </div>
</div>


ç¶šãã‚’ã‚„ã£ã¦ã„ãã€‚
æ˜¨æ—¥ã¯ä½“èª¿æ‚ªã™ãã¦ãªã‚“ã‚‚ã§ããªã‹ã£ãŸã€‚
é ­ç—›ã¨è…¹ç—›ã¨...ã©ã†ã—ãŸã‚“ã ä¿ºã€‚

## 1. virtualbox ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh
brew install --cask virtualbox
 ğŸº  virtualbox was successfully installed!
```

## 2. docker-machine ã‚’å‹•ã‹ã™

```sh
docker-machine create --driver virtualbox default
Running pre-create checks...
```

## 3. virtualboxã€€ã§ã„ã‚ã„ã‚ã‚„ã‚‹

èµ·å‹•ã—ãŸã‚Šã€ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ã®è¨±å¯ã‚’ã—ãŸã‚Š

## 4. ã‚µãƒ¼ãƒ“ã‚¹ã‚’ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ

```sh
brew services restart docker-machine
```

### 5. å‹•ã„ã¦ã‚‹ã‹ãƒã‚§ãƒƒã‚¯

```sh
> docker-machine ls
NAME      ACTIVE   DRIVER       STATE     URL   SWARM   DOCKER    ERRORS
default   *        virtualbox   Running                 Unknown   Machine does not have a host-only adapter
```

### 6. æ­¢ã‚ã¦ã‹ã‚‰å‹•ã‹ã™

```sh
docker-machine stop default
docker-machine start default
```

### 7. å‹•ã‹ãªã„ã®ã§è‰²ã€…æ¤œç´¢

`Error checking TLS connection: Machine does not have a host-only adapter` ãŒã‚„ãŸã‚‰å‡ºã‚‹ã®ã§è‰²ã€…ã‚„ã£ãŸã‘ã©è§£æ±ºã›ãš...ã€‚


<div class="card">
  <a href="https://stackoverflow.com/questions/69805077/cannot-start-docker-daemon-at-macbook"></a>
  <div class="card__header">
    <a href="https://stackoverflow.com/questions/69805077/cannot-start-docker-daemon-at-macbook">stackoverflow.com</a>
  </div>
  <div class="card__image">
    <img src="https://cdn.sstatic.net/Sites/stackoverflow/Img/apple-touch-icon@2.png?v=73d79a89bded">
  </div>
  <div class="card__title">
    <p>Cannot start Docker daemon at MacBook - Stack Overflow</p>
  </div>
  <div class="card__description">
    <p>I ran the command, brew services start docker-machine.
It says, &quot;Successfully started docker-machine&quot;. But, I got error when I ran docker ps -a. Please help.
brew services start docker-ma...</p>
  </div>
</div>



```sh
docker-machine create -d virtualbox --virtualbox-hostonly-cidr "192.168.63.1/24" default
```

ãƒ€ãƒ¡ã§ã—ãŸ

### 8. è…¹ãŸã£ã¦ããŸã®ã§ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh
brew uninstall docker docker-machine docker-compose
```

### 9. cask ã§ docker ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh
brew install --cask docker
ğŸº  docker was successfully installed!
```

### 10. ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç¢ºèª

```sh
docker --version
Docker version 24.0.2, build cb74dfc

docker-compose --version
docker: 'compose' is not a docker command.
See 'docker --help'

docker-machine --version
zsh: command not found: docker-machine
```

### 11. ps

```sh
docker ps
Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?
```

### 12. Docker.app ã‚’èµ·å‹•

ã‚ã‚“ã©ãã›ã‡...

### 13. å†ã³ ps

```sh
docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
```

### 14. machine ã¨ compose ã‚’ brew install

```sh
brew install docker-machine
brew services restart docker-machine
brew install docker-compose
brew link --overwrite docker-compose
```

### 15. ãƒ€ãƒ¡ã ã£ãŸã®ã§ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh
brew uninstall docker docker-machine docker-compose
brew uninstall --cask docker
```

### 16. VirtualBox ã®å¤ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

VirtualBox 6.1.26


<div class="card">
  <a href="https://www.virtualbox.org/wiki/Download_Old_Builds_6_1"></a>
  <div class="card__header">
    <a href="https://www.virtualbox.org/wiki/Download_Old_Builds_6_1">www.virtualbox.org</a>
  </div>
  <div class="card__image">
    <img src="">
  </div>
  <div class="card__title">
    <p>
      Download_Old_Builds_6_1     â€“ Oracle VM VirtualBox

    </p>
  </div>
  <div class="card__description">
    <p></p>
  </div>
</div>


ã‚¯ã‚½ã™ãã‚‹...ã€‚
ã“ã®è¾ºã˜ã‚ƒãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã‚‰ã—ã„ã€‚

### 17.ã€€ Nåº¦ç›®ã®æ­£ç›´

```sh
brew install docker docker-machine docker-compose
```

### 18. ã„ã‚ã„ã‚å®Ÿè¡Œ

```sh
brew services restart docker-machine

docker-machine create --driver virtualbox default
Error creating machine: Error in driver during machine creation: Unable to start the VM: /usr/local/bin/VBoxManage startvm default --type headless failed:
VBoxManage: error: The virtual machine 'default' has terminated unexpectedly during startup because of signal 10
VBoxManage: error: Details: code NS_ERROR_FAILURE (0x80004005), component MachineWrap, interface IMachine

docker-machine ls
NAME      ACTIVE   DRIVER       STATE     URL   SWARM   DOCKER    ERRORS
default   -        virtualbox   Stopped                 Unknown
```

ãƒ€ãƒ¡ã ã£ãŸã€‚

### 19. ã™ã¹ã¦ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

ã‚‚ã†ç„¡ç†ã€‚

virtualboxã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ã«å…¥ã£ã¦ãŸã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ„ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã€‚

### 20. ã‚‚ã†1å› cask ã‚’è©¦ã™ã€‚

```sh
brew install --cask docker
ğŸº  docker was successfully installed!
```

### 21. forDesktop ã‚’é–‹ã

```sh
open /Applications/Docker.app
```

ä»¥ä¸‹ã®è¨­å®šã‚’æœ‰åŠ¹ã«ã™ã‚‹

```
General
Start Docker Desktop when you log in
```

å‹•ã„ãŸï¼Ÿ
